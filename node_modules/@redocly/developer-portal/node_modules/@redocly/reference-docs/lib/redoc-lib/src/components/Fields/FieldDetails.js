"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),React=tslib_1.__importStar(require("react")),fields_1=require("../../common-elements/fields"),utils_1=require("../../utils"),ExternalDocumentation_1=require("../ExternalDocumentation/ExternalDocumentation"),Markdown_1=require("../Markdown/Markdown"),EnumValues_1=require("./EnumValues"),Extensions_1=require("./Extensions"),FieldContstraints_1=require("./FieldContstraints"),FieldDetail_1=require("./FieldDetail"),common_elements_1=require("../../common-elements/"),Labels_1=require("../../services/Labels"),OptionsProvider_1=require("../OptionsProvider"),styled_components_1=tslib_1.__importStar(require("../../styled-components")),MAX_PATTERN_LENGTH=45,FieldDetails=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:{patternShown:!1}}),Object.defineProperty(t,"togglePattern",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.setState({patternShown:!t.state.patternShown})}}),t}return tslib_1.__extends(t,e),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props,t=e.showExamples,n=e.field,l=e.renderDiscriminatorSwitch,a=this.state.patternShown,i=this.context,r=i.enumSkipQuotes,s=i.hideSchemaTitles,c=i.hideSchemaPattern,o=n.schema,m=n.description,p=n.example,u=n.deprecated,d=n.examples,_=!!r||"header"===n.in,b=null;if(t&&(void 0!==p||void 0!==d))if(void 0!==d)b=React.createElement(Examples,{field:n});else{var E=Labels_1.l("example")+":",f=!!n.in;b=React.createElement(FieldDetail_1.FieldDetail,{label:E,value:getSerializedValue(n,n.example),raw:f})}return React.createElement("div",null,React.createElement("div",null,React.createElement(fields_1.TypePrefix,null,o.typePrefix),React.createElement(fields_1.TypeName,null,o.displayType),o.displayFormat&&React.createElement(fields_1.TypeFormat,null," ","<",o.displayFormat,">"," "),o.contentEncoding&&React.createElement(fields_1.TypeFormat,null," ","<",o.contentEncoding,">"," "),o.contentMediaType&&React.createElement(fields_1.TypeFormat,null," ","<",o.contentMediaType,">"," "),o.title&&!s&&React.createElement(fields_1.TypeTitle,null," (",o.title,") "),React.createElement(FieldContstraints_1.ConstraintsView,{constraints:o.constraints}),o.pattern&&!c&&React.createElement(React.Fragment,null,React.createElement(fields_1.PatternLabel,null,a||o.pattern.length<MAX_PATTERN_LENGTH?o.pattern:o.pattern.substr(0,MAX_PATTERN_LENGTH)+"..."),o.pattern.length>MAX_PATTERN_LENGTH&&React.createElement(fields_1.ToggleButton,{onClick:this.togglePattern},a?"Hide pattern":"Show pattern")),o.isCircular&&React.createElement(fields_1.RecursiveLabel,null," ",Labels_1.l("recursive")," ")),u&&React.createElement("div",null,React.createElement(common_elements_1.Badge,{type:"warning",style:{marginLeft:0}}," ",Labels_1.l("deprecated")," ")),React.createElement(FieldDetail_1.FieldDetail,{raw:_,label:Labels_1.l("default")+":",value:o.default}),React.createElement("div",null,React.createElement(Markdown_1.Markdown,{compact:!0,source:m})),!l&&React.createElement(EnumValues_1.EnumValues,{type:o.type,values:o.enum.length&&o.enum||o["x-enumDescriptions"]})," ",b,React.createElement(Extensions_1.Extensions,{extensions:tslib_1.__assign(tslib_1.__assign({},n.extensions),o.extensions)}),o.externalDocs&&React.createElement(ExternalDocumentation_1.ExternalDocumentation,{externalDocs:o.externalDocs,compact:!0}),l&&l(this.props)||null,n.const&&React.createElement(FieldDetail_1.FieldDetail,{label:Labels_1.l("const")+":",value:n.const})||null)}}),Object.defineProperty(t,"contextType",{enumerable:!0,configurable:!0,writable:!0,value:OptionsProvider_1.OptionsContext}),t}(React.PureComponent);function Examples(e){var t=e.field;return t.examples?React.createElement(React.Fragment,null,React.createElement(fields_1.FieldLabel,null," ",Labels_1.l("examples"),": "),React.createElement(ExamplesList,null,Object.entries(t.examples).map((function(e){var n=e[0],l=e[1];return React.createElement(ExampleWrap,{key:n},React.createElement(ExampleSummary,null,l.summary||n," "),l.description&&React.createElement(ExampleDescription,null,l.description," "),React.createElement(fields_1.ExampleValue,null,getSerializedValue(t,l.value)))})))):null}function getSerializedValue(e,t){return e.in?decodeURIComponent(utils_1.serializeParameterValue(e,t)):t}exports.FieldDetails=FieldDetails;var templateObject_1,templateObject_2,templateObject_3,templateObject_4,ExampleDescription=styled_components_1.default.div(templateObject_1||(templateObject_1=tslib_1.__makeTemplateObject([""],[""]))),ExampleSummary=styled_components_1.default.label(templateObject_2||(templateObject_2=tslib_1.__makeTemplateObject(["\n  display: block;\n  font-size: inherit;\n  margin-bottom: 0.2em;\n  font-weight: ",";\n"],["\n  display: block;\n  font-size: inherit;\n  margin-bottom: 0.2em;\n  font-weight: ",";\n"])),(function(e){return e.theme.typography.fontWeightBold})),ExampleWrap=styled_components_1.default.div(templateObject_3||(templateObject_3=tslib_1.__makeTemplateObject(["\n  margin-top: 1em;\n  ","\n"],["\n  margin-top: 1em;\n  ","\n"])),(function(e){var t=e.theme;return styled_components_1.mediaCSS({fontSize:t.typography.fieldName.fontSize})})),ExamplesList=styled_components_1.default.div(templateObject_4||(templateObject_4=tslib_1.__makeTemplateObject(["\n  padding-left: 1.5em;\n  margin-bottom: 1em;\n"],["\n  padding-left: 1.5em;\n  margin-bottom: 1em;\n"])));
//# sourceMappingURL=FieldDetails.js.map