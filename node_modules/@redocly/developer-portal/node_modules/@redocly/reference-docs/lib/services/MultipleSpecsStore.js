"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),redoc_lib_1=require("../redoc-lib"),mobx_1=require("mobx"),SpecGroupModel=function(){function e(e,t,i,r){var o=this;void 0===r&&(r=0),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"absoluteIdx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"externalDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"active",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"expanded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"depth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"level",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),mobx_1.makeObservable(this),this.id=e,this.type="spec",this.name=i||"",this.level=0,this.depth=r,this.description="",this.parent=void 0,this.expanded=!0,this.items=t,t.forEach((function(e){return e.parent=o}))}return Object.defineProperty(e.prototype,"activate",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"expand",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"collapse",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"deactivate",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),tslib_1.__decorate([mobx_1.observable],e.prototype,"active",void 0),tslib_1.__decorate([mobx_1.observable],e.prototype,"expanded",void 0),tslib_1.__decorate([mobx_1.action],e.prototype,"activate",null),tslib_1.__decorate([mobx_1.action],e.prototype,"expand",null),tslib_1.__decorate([mobx_1.action],e.prototype,"collapse",null),tslib_1.__decorate([mobx_1.action],e.prototype,"deactivate",null),e}();exports.SpecGroupModel=SpecGroupModel;var SpecItemModel=function(){function e(e,t,i,r){var o=this;void 0===r&&(r=1),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"absoluteIdx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"externalDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"active",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"expanded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"depth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"level",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),mobx_1.makeObservable(this),this.id=e,this.type="spec",this.name=i||"",this.level=0,this.depth=r,this.description="",this.parent=void 0,this.expanded=!1,this.items=t,t.forEach((function(e){return e.parent=o}))}return Object.defineProperty(e.prototype,"activate",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.active=!0}}),Object.defineProperty(e.prototype,"expand",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.parent&&this.parent.expand(),this.expanded=!0}}),Object.defineProperty(e.prototype,"collapse",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.expanded=!1}}),Object.defineProperty(e.prototype,"deactivate",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.active=!1}}),tslib_1.__decorate([mobx_1.observable],e.prototype,"active",void 0),tslib_1.__decorate([mobx_1.observable],e.prototype,"expanded",void 0),tslib_1.__decorate([mobx_1.action],e.prototype,"activate",null),tslib_1.__decorate([mobx_1.action],e.prototype,"expand",null),tslib_1.__decorate([mobx_1.action],e.prototype,"collapse",null),tslib_1.__decorate([mobx_1.action],e.prototype,"deactivate",null),e}();function assignSpecIdxDeep(e,t,i){e.forEach((function(e){e.items&&assignSpecIdxDeep(e.items,t,i),e.id=i+"/"+e.id,"operation"===e.type&&(e.specIdx=t)}))}exports.SpecItemModel=SpecItemModel;var MultipleSpecsStore=function(){function e(e,t){var i;Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"specs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contentItems",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"info",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"externalDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"securitySchemes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.specs=[],this.contentItems=[];for(var r=0,o=0,a=e;o<a.length;o++){var n=a[o],l=[];if(n.url)this.addSpec(n,t,r,n,l),r++,(i=this.contentItems).push.apply(i,l);else{for(var b=0,c=n.items||[];b<c.length;b++){var p=c[b];this.addSpec(p,t,r,n,l),r++}var u=new SpecGroupModel(n.id,l,n.title);this.contentItems.push(u)}}this.info=this.specs[0].info,this.externalDocs=this.specs[0].externalDocs,this.securitySchemes=this.specs[0].securitySchemes}return Object.defineProperty(e.prototype,"addSpec",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,i,r,o){var a=new redoc_lib_1.SpecStore(e.definition,e.url,t);this.specs.push(a),assignSpecIdxDeep(a.contentItems,i,r.id),e.title?(increaseDepthDeep(a.contentItems),o.push(new SpecItemModel(e.id,a.contentItems,e.title,1))):o.push.apply(o,a.contentItems)}}),Object.defineProperty(e.prototype,"parser",{get:function(){return this.specs[0].parser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toJS",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.config}}),e}();function increaseDepthDeep(e){Array.isArray(e)&&e.forEach((function(e){e.depth++,increaseDepthDeep(e.items)}))}exports.MultipleSpecsStore=MultipleSpecsStore;
//# sourceMappingURL=MultipleSpecsStore.js.map