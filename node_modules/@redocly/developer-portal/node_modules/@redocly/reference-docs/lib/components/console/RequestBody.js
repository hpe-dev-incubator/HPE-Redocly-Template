"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var templateObject_1,tslib_1=require("tslib"),React=tslib_1.__importStar(require("react")),redoc_lib_1=require("../../redoc-lib"),form_1=require("../common/form"),CodemirrorInput_1=tslib_1.__importDefault(require("./CodemirrorInput")),RequestMimeLabel_1=require("./RequestMimeLabel"),ExamplesPanel=redoc_lib_1.styled.div(templateObject_1||(templateObject_1=tslib_1.__makeTemplateObject(["\n  margin-bottom: 10px;\n"],["\n  margin-bottom: 10px;\n"]))),RequestBody=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:{activeExampleIdx:0}}),Object.defineProperty(t,"applyExample",{enumerable:!0,configurable:!0,writable:!0,value:function(e){t.setState({activeExampleIdx:e.idx}),t.props.console.formApi.setValue("body",t.getActiveSample(e.idx))}}),t}return tslib_1.__extends(t,e),Object.defineProperty(t.prototype,"getActiveSample",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.props.body.content;if(!t||!t.hasSample)return"";var r=Object.values(t.active&&t.active.examples||{});return r[e]&&JSON.stringify(r[e].value,null,2)||""}}),Object.defineProperty(t.prototype,"encodeSample",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?"application/x-www-form-urlencoded"===e.mime?e.value:JSON.stringify(e.value,null,2):""}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.state.activeExampleIdx,r=this.props.validate;return React.createElement(React.Fragment,null,React.createElement(redoc_lib_1.MediaTypesSwitch,{content:this.props.body.content,renderDropdown:this.renderDropdown},(function(a){var l,n=a.examples||{};e.props.resolvedBody&&(l=(e.props.resolvedBody.content[a.name]||{}).schema);var o=Object.values(n)[0],i=Object.keys(n).map((function(e,t){return{idx:t,value:n[e].summary||e}}));return React.createElement(React.Fragment,null,i.length&&!(1===i.length&&"default"===i[0].value)&&React.createElement(ExamplesPanel,null,React.createElement(form_1.FormControl,null,React.createElement(redoc_lib_1.Dropdown,{variant:"dark",fullWidth:!0,prefix:"Example: ",options:i,value:i[t].value,onChange:e.applyExample})))||null,React.createElement(CodemirrorInput_1.default,{id:"body"+e.props.id,field:"body",initialValue:e.encodeSample(o),schema:l,mode:a.name,validate:r}))})))}}),Object.defineProperty(t.prototype,"renderDropdown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return React.createElement(form_1.FormControl,null,React.createElement(redoc_lib_1.DropdownOrLabel,tslib_1.__assign({},e,{variant:"dark",fullWidth:!0,Label:RequestMimeLabel_1.RequestMimeLabel,Dropdown:redoc_lib_1.Dropdown})))}}),t}(React.Component);exports.RequestBody=RequestBody;
//# sourceMappingURL=RequestBody.js.map