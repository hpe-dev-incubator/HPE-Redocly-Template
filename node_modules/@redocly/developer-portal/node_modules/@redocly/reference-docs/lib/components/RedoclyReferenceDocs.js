"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("tslib"),React=tslib_1.__importStar(require("react")),mobx_react_1=require("mobx-react"),mobx_1=require("mobx"),redoc_lib_1=require("../redoc-lib"),Search_1=require("./Search"),NextSectionButton_1=require("./NextSectionButton"),StoreProvider_1=require("./StoreProvider"),store_types_1=require("../services/store-types"),ConsoleLazy_1=require("./console/ConsoleLazy"),MultipleSpecsStore_1=require("../services/MultipleSpecsStore"),ProProviders_1=require("./ProProviders"),Overlay_1=require("./Overlay"),VersionedSpecStore_1=require("../services/VersionedSpecStore"),VersionSwitcher_1=require("./VersionSwitcher"),styled_elements_1=require("./styled.elements");mobx_1.configure({useProxies:"ifavailable"}),exports.CssFixes=redoc_lib_1.createGlobalStyle(templateObject_1||(templateObject_1=tslib_1.__makeTemplateObject(['\n  div[data-section-id]::after {\n    content: " ";\n    display: block;\n    height: 0;\n    clear: both;\n    visibility: hidden;\n  }\n\n  ',"  {\n    ","\n  }\n\n  ",", ","  {\n    ","\n  }\n\n  ",", "," {\n    ","\n  }\n\n  "," {\n    ",";\n  }\n"],['\n  div[data-section-id]::after {\n    content: " ";\n    display: block;\n    height: 0;\n    clear: both;\n    visibility: hidden;\n  }\n\n  ',"  {\n    ","\n  }\n\n  ",", ","  {\n    ","\n  }\n\n  ",", "," {\n    ","\n  }\n\n  "," {\n    ",";\n  }\n"])),redoc_lib_1.RightPanel,(function(e){var t,r=e.theme,o=e.showRightPanel,n=e.layout;return redoc_lib_1.mediaCSS({width:n===store_types_1.LayoutVariant.STACKED?"100%":"",paddingLeft:n===store_types_1.LayoutVariant.STACKED?r.spacing.sectionHorizontal:"",display:o?"":(t={},t[redoc_lib_1.ZERO_BREAKPOINT]="",t[r.rightPanel.showAtBreakpoint]="none",t)})}),styled_elements_1.BackgroundStub,styled_elements_1.BackgroundStubFix,(function(e){var t,r=e.theme,o=e.showRightPanel,n=e.layout;return redoc_lib_1.mediaCSS({display:o&&n!==store_types_1.LayoutVariant.STACKED?"":(t={},t[redoc_lib_1.ZERO_BREAKPOINT]="",t[r.rightPanel.showAtBreakpoint]="none",t)})}),redoc_lib_1.MiddlePanel,styled_elements_1.NextSectionButtonWrap,(function(e){var t,r=e.theme,o=e.showRightPanel,n=e.layout;return redoc_lib_1.mediaCSS({paddingRight:n===store_types_1.LayoutVariant.STACKED?r.spacing.sectionHorizontal:"",width:o&&n===store_types_1.LayoutVariant.THREE_PANEL?"":(t={},t[redoc_lib_1.ZERO_BREAKPOINT]="",t[r.rightPanel.showAtBreakpoint]="100%",t)})}),styled_elements_1.ApiContentWrap,(function(e){var t,r,o=e.theme,n=e.showRightPanel,a=e.layout;return redoc_lib_1.mediaCSS({width:(t={},t[redoc_lib_1.ZERO_BREAKPOINT]="none",t.small="calc(100% - "+o.sidebar.width+")",t),maxWidth:tslib_1.__assign((r={},r[redoc_lib_1.ZERO_BREAKPOINT]="",r),o.layout[a===store_types_1.LayoutVariant.THREE_PANEL&&n?store_types_1.LayoutVariant.THREE_PANEL:store_types_1.LayoutVariant.STACKED].maxWidth)})}));var RedoclyReferenceDocs=function(e){function t(t){var r=e.call(this,t)||this;return Object.defineProperty(r,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_updatedItems",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(r,"rootElementRef",{enumerable:!0,configurable:!0,writable:!0,value:React.createRef()}),Object.defineProperty(r,"handleClose",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.props.store.tryItOut()}}),r.state={searchPopUpShown:!1,searchPopUpValue:""},r}return tslib_1.__extends(t,e),Object.defineProperty(t.prototype,"componentDidMount",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.props.store.onDidMount(),this._observer=mobx_1.reaction((function(){return e.props.store.menu.renderItems}),(function(){e._updatedItems=!0}))}}),Object.defineProperty(t.prototype,"componentDidUpdate",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._updatedItems&&(this._updatedItems=!1,this.props.store.menu.scrollToActive())}}),Object.defineProperty(t.prototype,"componentWillUnmount",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.props.store.dispose(),this._observer()}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.props.store,r=t.definition,o=t.menu,n=t.options,a=t.search,i=t.marker,l=this.props.store,s=o.renderItems,c=!n.hideInfoSection&&("none"===n.pagination||l.menu.activeRenderItemIdx<=0);return c&&"none"!==n.pagination&&n.disableSidebar&&s[0]&&"section"!==s[0].type&&(c=!1),r instanceof MultipleSpecsStore_1.MultipleSpecsStore&&(c=!1),this.props._forceRenderInfo&&(c=!0),React.createElement(ProProviders_1.ProProviders,{store:l},React.createElement(styled_elements_1.RedocWrap,{className:"redoc-wrap",ref:this.rootElementRef},React.createElement(Overlay_1.Overlay,{l:l.l}),React.createElement(exports.CssFixes,{whiteLabel:n.whiteLabel,showRightPanel:l.showRightPanel,layout:l.layout}),l.tryItOperation&&React.createElement(ConsoleLazy_1.Console,{rootElement:this.rootElementRef.current,store:l,operation:l.tryItOperation,onClose:this.handleClose,specIdx:l.tryItOperation.specIdx}),!n.disableSidebar&&React.createElement(redoc_lib_1.StickyResponsiveSidebar,{menu:o,className:"menu-content"},!l.options.hideLogo&&React.createElement(redoc_lib_1.ApiLogo,{info:r.info}),r instanceof VersionedSpecStore_1.VersionedSpecStore&&React.createElement(VersionSwitcher_1.VersionSwitcher,{spec:r,onChange:function(e){r.changeVersion(e.idx),o.updateItemsByVersionChange(!0),l.tryItOut(void 0)}}),!l.options.disableSearch&&React.createElement(Search_1.SearchField,{showPopUp:function(){return e.setState({searchPopUpShown:!0})},searchValue:this.state.searchPopUpValue,marker:i,setSearchValue:function(t){return e.setState({searchPopUpValue:t})}}),React.createElement(redoc_lib_1.SideMenu,{menu:o})),React.createElement(styled_elements_1.ApiContentWrap,{className:(l.isLoading?"loading ":"")+"api-content",layout:l.layout===store_types_1.LayoutVariant.THREE_PANEL&&l.showRightPanel?store_types_1.LayoutVariant.THREE_PANEL:store_types_1.LayoutVariant.STACKED},n.theme.layout.showDarkRightPanel&&l.showRightPanel&&l.layout!==store_types_1.LayoutVariant.STACKED&&React.createElement(styled_elements_1.BackgroundStub,null),c&&React.createElement(redoc_lib_1.ApiInfo,{store:l}),React.createElement(redoc_lib_1.ContentItems,{items:s,store:l}),n.showNextButton&&React.createElement(NextSectionButton_1.ContinueButton,{pagination:n.pagination,menu:o}),this.props.children),React.createElement(styled_elements_1.ControlsWrap,null,React.createElement(styled_elements_1.ToggleRightPanelButton,{store:l,isVisible:l.layout===store_types_1.LayoutVariant.THREE_PANEL}),React.createElement(styled_elements_1.ChangeViewButton,{store:l,isVisible:l.showRightPanel})),React.createElement(Search_1.ProSearchBox,{search:a,marker:i,menu:o,onActivate:o.activateAndScroll.bind(o),options:n,shown:this.state.searchPopUpShown,hidePopUp:function(){return e.setState({searchPopUpShown:!1})},showPopUp:function(){return e.setState({searchPopUpShown:!0})},setSearchValue:function(t){return e.setState({searchPopUpValue:t})},searchValue:this.state.searchPopUpValue}),n.theme.layout.showDarkRightPanel&&l.showRightPanel&&l.layout!==store_types_1.LayoutVariant.STACKED&&React.createElement(styled_elements_1.BackgroundStubFix,null)))}}),t=tslib_1.__decorate([mobx_react_1.observer],t)}(React.Component);function RedoclyReferenceDocsStandalone(e){var t=e.definition,r=e.definitionUrl,o=e.options,n=void 0===o?{}:o,a=e.activeItemId,i=e.activeSampleLanguage,l=e.activeDeepLink,s=redoc_lib_1.argValueToBoolean(n.hideLoading,!1),c=new redoc_lib_1.RedocNormalizedOptions(n),d=React.createElement(StoreProvider_1.ProStoreProvider,{definition:t,definitionUrl:r,options:n,activeItemId:a,activeSampleLanguage:i,activeDeepLink:l},(function(e){var t=e.loading,r=e.store;return t?s?null:React.createElement(redoc_lib_1.Loading,{color:c.theme.colors.primary.main}):React.createElement(RedoclyReferenceDocs,{store:r})}));return n.disableErrorBoundary?d:React.createElement(redoc_lib_1.ErrorBoundary,null,d)}exports.RedoclyReferenceDocs=RedoclyReferenceDocs,exports.RedoclyReferenceDocsStandalone=RedoclyReferenceDocsStandalone;var templateObject_1,RedoclyReferenceDocsMultiStandalone=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tslib_1.__extends(t,e),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props,t=e.definitions,r=e.options,o=void 0===r?{}:r,n=redoc_lib_1.argValueToBoolean(o.hideLoading,!1),a=new redoc_lib_1.RedocNormalizedOptions(o);return React.createElement(redoc_lib_1.ErrorBoundary,null,React.createElement(StoreProvider_1.ProStoreProvider,{definitions:t,options:o},(function(e){var t=e.loading,r=e.store;return t?n?null:React.createElement(redoc_lib_1.Loading,{color:a.theme.colors.primary.main}):React.createElement(RedoclyReferenceDocs,{store:r})})))}}),t}(React.Component);exports.RedoclyReferenceDocsMultiStandalone=RedoclyReferenceDocsMultiStandalone;
//# sourceMappingURL=RedoclyReferenceDocs.js.map