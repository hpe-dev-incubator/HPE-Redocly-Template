import{__assign,__makeTemplateObject}from"tslib";import{observer}from"mobx-react";import*as React from"react";import{ShelfIcon}from"../../common-elements/icons";import{shortenHTTPVerb}from"../../utils/openapi";import{MenuItems}from"./MenuItems";import{MenuItemLabel,MenuItemLi,MenuItemTitle,OperationBadge}from"./styled.elements";import{OptionsContext}from"../OptionsProvider";import styled from"../../styled-components";import{l}from"../../services/Labels";var MenuItemLink=MenuItemLabel.withComponent("a");export var MenuExternalLink=observer((function(e){var t=e.link;return React.createElement(MenuItemLi,{depth:1},React.createElement(MenuItemLink,{href:t.link,target:t.target,active:!1,depth:1},React.createElement(MenuItemTitle,{title:t.label},t.label)))}));export var MenuItem=observer((function(e){var t=e.item,n=e.withoutChildren,a=React.createRef(),r=React.useState(!1),i=r[0],m=r[1],o=React.useState("group"===t.type&&t.expanded),c=o[0],l=o[1];React.useEffect((function(){m(t.active)}),[t.active]),React.useEffect((function(){l(t.expanded)}),[t.expanded]);var p=React.useCallback((function(t){e.onActivate(e.item,t),t.stopPropagation()}),[e.onActivate,e.item]);return React.useEffect((function(){e.item.active&&a.current&&a.current.scrollIntoViewIfNeeded()}),[e.item,e.item.active,a.current]),React.createElement(MenuItemLi,{onClick:p,depth:t.depth,"data-item-id":t.id},"operation"===t.type?React.createElement(ProOperationMenuItemContent,__assign({},e,{item:t,ref:a})):React.createElement(MenuItemLabel,{depth:t.depth,active:i,type:t.type,ref:a,hasChildren:t.items&&t.items.length>0},t.depth>0&&t.items.length>0&&React.createElement(ShelfIcon,{direction:c?"down":"right"})||null,React.createElement(MenuItemTitle,{title:t.name},t.name,e.children)),!n&&t.items&&t.items.length>0&&React.createElement(MenuItems,{expanded:c,items:t.items,onActivate:e.onActivate}))}));export var ProOperationMenuItemContent=observer(React.forwardRef((function(e,t){var n,a,r=e.item;return"path-first"!==React.useContext(OptionsContext).sideNavStyle&&!r.search||"operation"!==r.type?(n=r.name,a=null):(n=React.createElement(MenuItemPath,{title:r.path}," ",r.path," "),a=React.createElement(MenuItemDescription,null," ",r.name," ")),React.createElement(ProMenuItemLabel,{depth:r.depth,active:r.active,deprecated:r.deprecated,ref:t},r.isWebhook?React.createElement(OperationBadge,{type:"hook"},l("webhook")):React.createElement(OperationBadge,{type:r.httpVerb},shortenHTTPVerb(r.httpVerb)),React.createElement(MenuItemTitle,{width:"calc(100% - 42px)"},n,e.children),a)})));var ProMenuItemLabel=styled(MenuItemLabel)(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  flex-wrap: wrap;\n"],["\n  flex-wrap: wrap;\n"])));export var MenuItemPath=styled.code(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  line-height: 1.4;\n  display: inline-block;\n  margin-bottom: 5px;\n  ","\n"],["\n  line-height: 1.4;\n  display: inline-block;\n  margin-bottom: 5px;\n  ","\n"])),(function(e){var t;return(null===(t=e.theme.sidebar)||void 0===t?void 0:t.breakPath)?"word-break: break-all":""}));var templateObject_1,templateObject_2,templateObject_3,MenuItemDescription=styled.small(templateObject_3||(templateObject_3=__makeTemplateObject(["\n  display: block;\n  font-size: 0.87em;\n  line-height: 1.2;\n"],["\n  display: block;\n  font-size: 0.87em;\n  line-height: 1.2;\n"])));
//# sourceMappingURL=MenuItem.js.map