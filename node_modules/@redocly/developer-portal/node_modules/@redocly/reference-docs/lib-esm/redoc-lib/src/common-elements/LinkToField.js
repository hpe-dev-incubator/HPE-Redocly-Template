import{__assign,__makeTemplateObject}from"tslib";import*as React from"react";import{StoreContext}from"../components/StoreBuilder";import styled from"../styled-components";import{SECTION_ATTR}from"../services/constants";import{isModifiedEvent,linkifyMixin}from"./linkify";import{constructFieldDeepFragment}from"../../../services/history/helpers";export var LinkToField=function(e){var i,n,t,o=React.useContext(StoreContext),r=React.useState(!1),l=r[0],a=r[1],s=(null==o?void 0:o.menu.history.linkForId(null===(n=e.field.deps.operation)||void 0===n?void 0:n.id))||"",p=constructFieldDeepFragment(e.field),c=o&&p?o.menu.history.generateDeepLink(p,s):null,d=o?((i={})[SECTION_ATTR]=(null===(t=e.field.deps.operation)||void 0===t?void 0:t.id)+o.options.deepLinkPrefix+p,i.id=c&&c.split("#")[1]||void 0,i):null;return React.useEffect((function(){if(o&&d)return a(o.menu.history.currentId===d[SECTION_ATTR]),o.menu.history.subscribe((function(e){a(e===d[SECTION_ATTR])}))}),[null==o?void 0:o.menu.history,null==d?void 0:d[SECTION_ATTR]]),p&&o&&c?React.createElement("a",__assign({className:e.className+(l?" active":""),href:c,onClick:function(e){return function(e,i,n){i.defaultPrevented||0!==i.button||isModifiedEvent(i)||(i.preventDefault(),e.replaceForField(n))}(o.menu.history,e,c),e.stopPropagation(),e.preventDefault(),o.options.onDeepLinkClick&&o.options.onDeepLinkClick(c),!1}},d),e.children):e.children||null};export var ShareLinkToField=styled(LinkToField)(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  ","\n\n  & {\n    position: relative;\n    left: 0;\n\n    margin-left: calc(-12px - 4px);\n    padding-top: 10px;\n    margin-top: -10px;\n\n    .field-name:hover > &::before,\n    &:hover::before {\n      visibility: visible;\n    }\n  }\n\n  &.active::before {\n    visibility: visible;\n  }\n"],["\n  ","\n\n  & {\n    position: relative;\n    left: 0;\n\n    margin-left: calc(-12px - 4px);\n    padding-top: 10px;\n    margin-top: -10px;\n\n    .field-name:hover > &::before,\n    &:hover::before {\n      visibility: visible;\n    }\n  }\n\n  &.active::before {\n    visibility: visible;\n  }\n"])),linkifyMixin("&","12px"));var templateObject_1;
//# sourceMappingURL=LinkToField.js.map