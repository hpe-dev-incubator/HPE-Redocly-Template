import*as Sampler from"openapi-sampler";import{SchemaModel}from"./Schema";import{isJsonLike,mapValues}from"../../utils";import{ExampleModel}from"./Example";var MediaTypeModel=function(){function e(e,i,a,t,l,s){var o=void 0===s?{}:s,n=o.operation,r=o.type,p=o.response;Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isRequestType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onlyRequiredInSamples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i,this.isRequestType=a,this.schema=t.schema&&new SchemaModel(e,t.schema,"",l,void 0,void 0,{operation:n,type:r,response:p}),this.onlyRequiredInSamples=l.onlyRequiredInSamples,void 0!==t.examples?this.examples=mapValues(t.examples,(function(a){return new ExampleModel(e,a,i,t.encoding)})):void 0!==t.example?this.examples={default:new ExampleModel(e,{value:e.shallowDeref(t.example)},i,t.encoding)}:isJsonLike(i)&&this.generateExample(e,t)}return Object.defineProperty(e.prototype,"generateExample",{enumerable:!1,configurable:!0,writable:!0,value:function(e,i){var a={skipReadOnly:this.isRequestType,skipNonRequired:this.isRequestType&&this.onlyRequiredInSamples,skipWriteOnly:!this.isRequestType,maxSampleDepth:this.options.generatedPayloadSamplesMaxDepth};if(this.schema&&this.schema.oneOf){this.examples={};for(var t=0,l=this.schema.oneOf;t<l.length;t++){var s=l[t],o=Sampler.sample(s.rawSchema,a,e.definition);this.schema.discriminatorProp&&"object"==typeof o&&o&&(o[this.schema.discriminatorProp]=s.title),this.examples[s.title]=new ExampleModel(e,{value:o},this.name,i.encoding)}}else this.schema&&(this.examples={default:new ExampleModel(e,{value:Sampler.sample(i.schema,a,e.definition)},this.name,i.encoding)})}}),e}();export{MediaTypeModel};
//# sourceMappingURL=MediaType.js.map