import{__assign,__extends,__makeTemplateObject}from"tslib";import*as React from"react";import{DropdownOrLabel,Dropdown,MediaTypesSwitch,styled}from"../../redoc-lib";import{FormControl}from"../common/form";import CodemirrorInput from"./CodemirrorInput";import{RequestMimeLabel}from"./RequestMimeLabel";var templateObject_1,ExamplesPanel=styled.div(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  margin-bottom: 10px;\n"],["\n  margin-bottom: 10px;\n"]))),RequestBody=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:{activeExampleIdx:0}}),Object.defineProperty(t,"applyExample",{enumerable:!0,configurable:!0,writable:!0,value:function(e){t.setState({activeExampleIdx:e.idx}),t.props.console.formApi.setValue("body",t.getActiveSample(e.idx))}}),t}return __extends(t,e),Object.defineProperty(t.prototype,"getActiveSample",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.props.body.content;if(!t||!t.hasSample)return"";var r=Object.values(t.active&&t.active.examples||{});return r[e]&&JSON.stringify(r[e].value,null,2)||""}}),Object.defineProperty(t.prototype,"encodeSample",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?"application/x-www-form-urlencoded"===e.mime?e.value:JSON.stringify(e.value,null,2):""}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.state.activeExampleIdx,r=this.props.validate;return React.createElement(React.Fragment,null,React.createElement(MediaTypesSwitch,{content:this.props.body.content,renderDropdown:this.renderDropdown},(function(a){var n,o=a.examples||{};e.props.resolvedBody&&(n=(e.props.resolvedBody.content[a.name]||{}).schema);var l=Object.values(o)[0],i=Object.keys(o).map((function(e,t){return{idx:t,value:o[e].summary||e}}));return React.createElement(React.Fragment,null,i.length&&!(1===i.length&&"default"===i[0].value)&&React.createElement(ExamplesPanel,null,React.createElement(FormControl,null,React.createElement(Dropdown,{variant:"dark",fullWidth:!0,prefix:"Example: ",options:i,value:i[t].value,onChange:e.applyExample})))||null,React.createElement(CodemirrorInput,{id:"body"+e.props.id,field:"body",initialValue:e.encodeSample(l),schema:n,mode:a.name,validate:r}))})))}}),Object.defineProperty(t.prototype,"renderDropdown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return React.createElement(FormControl,null,React.createElement(DropdownOrLabel,__assign({},e,{variant:"dark",fullWidth:!0,Label:RequestMimeLabel,Dropdown:Dropdown})))}}),t}(React.Component);export{RequestBody};
//# sourceMappingURL=RequestBody.js.map