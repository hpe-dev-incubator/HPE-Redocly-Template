import*as React from"react";import{useStaticQuery,graphql}from"gatsby";import UserNavBar from"../UserComponents/NavBar";import{withPathPrefix}from"../../utils";async function loadRbacNavItems(a,b){try{return(await fetch(withPathPrefix("_auth/header",b))).json()}catch(b){return a}}export function NavBar(a){let{siteConfig:b,site:{pathPrefix:c,siteMetadata:{logoAltText:d}}}=useStaticQuery(graphql`
      query NavQuery {
        ...NavFragment
        site {
          siteMetadata {
            logoAltText
          }
          pathPrefix
        }
        siteConfig {
          withRbac
        }
      }
    `);const e=b.nav,f=b.withRbac,[g,h]=React.useState(e);return React.useEffect(()=>{f&&async function(){"development"===process.env.NODE_ENV||h(await loadRbacNavItems(g,c))}()},[f]),React.createElement(React.Fragment,null,React.createElement(UserNavBar,Object.assign({items:g,logo:b.logo,logoAltText:d,pathPrefix:c,sidebarName:a.sidebarName},a)))}